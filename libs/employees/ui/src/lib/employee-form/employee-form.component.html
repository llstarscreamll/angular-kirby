<form [formGroup]="form" (ngSubmit)="submit()">
  <fieldset class="mt-3">
    <legend>Información personal</legend>
    <div class="row">
      <mat-form-field class="col-sm-4">
        <input
          formControlName="first_name"
          matInput
          placeholder="Nombres"
          required="true"
        />
      </mat-form-field>

      <mat-form-field class="col-sm-4">
        <input
          formControlName="last_name"
          matInput
          placeholder="Apellidos"
          required="true"
        />
      </mat-form-field>

      <mat-form-field class="col-sm-4">
        <input
          formControlName="identification_number"
          matInput
          placeholder="# de identificación"
          required="true"
        />
      </mat-form-field>
    </div>

    <div class="row">
      <mat-form-field class="col-sm-4">
        <input
          formControlName="location"
          matInput
          placeholder="Ciudad"
          required="true"
        />
      </mat-form-field>

      <mat-form-field class="col-sm-4">
        <input
          formControlName="address"
          matInput
          placeholder="Dirección"
          required="true"
        />
      </mat-form-field>

      <mat-form-field class="col-sm-4">
        <input
          formControlName="phone"
          matInput
          placeholder="Teléfono"
          required="true"
        />
      </mat-form-field>
    </div>
  </fieldset>

  <fieldset class="mt-3">
    <legend>Información de empleado</legend>
    <div class="row">
      <mat-form-field class="col-sm-6">
        <input
          formControlName="code"
          matInput
          placeholder="Código"
          required="true"
        />
      </mat-form-field>
      <mat-form-field class="col-sm-6">
        <input
          matInput
          placeholder="Centro de costo"
          [matAutocomplete]="costCenterAutocomplete"
          formControlName="cost_center"
        />
        <mat-autocomplete
          #costCenterAutocomplete="matAutocomplete"
          [displayWith]="displayCostCenterFieldValue"
        >
          <mat-option
            *ngFor="let costCenter of costCenters"
            [value]="costCenter"
          >
            <span>{{ costCenter.name }}</span>
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>
    </div>

    <div class="row">
      <mat-form-field class="col-sm-6">
        <input
          formControlName="position"
          matInput
          placeholder="Cargo"
          required="true"
        />
      </mat-form-field>

      <mat-form-field class="col-sm-6">
        <input
          formControlName="salary"
          matInput
          type="number"
          min="1"
          placeholder="Salario"
          required="true"
        />
      </mat-form-field>
    </div>
  </fieldset>

  <fieldset class="mt-3">
    <legend>Control de acceso</legend>
    <div class="row">
      <mat-form-field class="col-md-6">
        <mat-label>Turnos de trabajo</mat-label>
        <mat-select
          formControlName="work_shifts"
          [compareWith]="compareWithFunction"
          multiple="true"
          required
        >
          <mat-option *ngFor="let workShift of workShifts" [value]="workShift">
            {{ workShift.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <p>Códigos de acceso:</p>
    <div formArrayName="identifications" class="identifications mt-2">
      <div
        *ngFor="
          let identificationGroupControl of identificationsArrayControl.controls;
          let i = index
        "
        [formGroup]="identificationGroupControl"
        class="row"
      >
        <mat-form-field class="col-sm-4">
          <input
            formControlName="name"
            matInput
            placeholder="Nombre"
            required="true"
          />
        </mat-form-field>

        <mat-form-field class="col">
          <input
            formControlName="code"
            matInput
            placeholder="Código"
            required="true"
          />
        </mat-form-field>

        <button
          (click)="removeIdentificationCode(i)"
          [disabled]="!identificationGroupControl?.valid"
          type="button"
          mat-icon-button
          color="warn"
          class="col-auto remove-identification-code"
        >
          <mat-icon>close</mat-icon>
        </button>
      </div>
    </div>
    <div>
      <button
        (click)="addIdentification()"
        [disabled]="!identificationsArrayControl?.valid"
        type="button"
        mat-button
        class="add-identification-code"
      >
        Añadir código de acceso
      </button>
    </div>
    <hr />
  </fieldset>

  <button
    [disabled]="disableSubmitButton"
    mat-raised-button
    color="primary"
    type="submit"
    class="mt-3"
  >
    Guardar
  </button>
  <div class="clearfix m-2"></div>
  <span class="text-muted">Los campos marcados con * son obligatorios</span>
</form>
